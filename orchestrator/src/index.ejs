<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Bytebank</title>

    <meta
      http-equiv="Content-Security-Policy"
      content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;"
    />

    <meta name="importmap-type" use-injector />
    <!-- If you wish to turn off import-map-overrides for specific environments (prod), uncomment the line below -->
    <!-- More info at https://github.com/single-spa/import-map-overrides/blob/main/docs/configuration.md#domain-list -->
    <!-- <meta name="import-map-overrides-domains" content="denylist:prod.example.com" /> -->

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://kit.fontawesome.com/3cf4826d9e.js"
      crossorigin="anonymous"
    ></script>
    <!-- Shared dependencies go into this import map -->
    <script type="injector-importmap">
      {
        "imports": {
          "single-spa": "https://cdn.jsdelivr.net/npm/single-spa@6.0.3/lib/es2015/esm/single-spa.min.js",
          "react": "https://cdn.jsdelivr.net/npm/react@18.3.1/+esm",
          "react-dom": "https://cdn.jsdelivr.net/npm/react-dom@18.3.1/+esm",
          "react-hook-form": "https://ga.jspm.io/npm:react-hook-form@7.53.2/dist/index.esm.mjs",
          "chart.js": "https://ga.jspm.io/npm:chart.js@4.4.7/dist/chart.js",
          "recoil": "https://ga.jspm.io/npm:recoil@0.7.7/es/index.js"
        }
      }
    </script>
    <link
      rel="preload"
      href="https://cdn.jsdelivr.net/npm/single-spa@6.0.3/lib/es2015/esm/single-spa.min.js"
      as="module"
    />

    <!-- Add your organization's prod import map URL to this script's src  -->
    <!-- <script type="injector-importmap" src="/importmap.json"></script> -->

    <% if (isLocal) { %>
    <script type="injector-importmap">
      {
        "imports": {
          "@bytebank/root-config": "//orchestrator-fiap.duckdns.org:9000/bytebank-root-config.js",
          "@bytebank/auth": "//auth-fiap.duckdns.org:8500/bytebank-auth.js",
          "@bytebank/dashboard": "//dashboard-fiap.duckdns.org:8501/bytebank-dashboard.js",
          "@bytebank/notfound": "//notfound-fiap.duckdns.org:8502/bytebank-notfound.js"
        }
      }
    </script>
    <% } %>

    <script src="https://cdn.jsdelivr.net/npm/import-map-overrides@4.1.0/dist/import-map-overrides.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@single-spa/import-map-injector@1.1.0/lib/import-map-injector.js"></script>

    <script>
      // Required by some npm packages
      window.process = { browser: true, env: { ENVIRONMENT: "BROWSER" } };
    </script>
  </head>
  <body>
    <noscript> You need to enable JavaScript to run this app. </noscript>
    <main></main>
    <script>
      window.importMapInjector.initPromise.then(() => {
        import("@bytebank/root-config");
      });
    </script>
    <import-map-overrides-full
      show-when-local-storage="devtools"
      dev-libs
    ></import-map-overrides-full>
  </body>
</html>
